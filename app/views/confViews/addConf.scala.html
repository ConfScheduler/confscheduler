@(conferenceForm: Form[ConferenceController.SimpleConference])(implicit request: play.api.mvc.Request[Any], userRole: UserRole)

@main("Add a new conference") {
    <script src='@routes.Assets.at("javascripts/conferenceForm.js")' type="text/javascript"></script>


    @helper.form(routes.ConferenceController.create, 'class -> "form-horizontal") {
        <input type="hidden" id="timezoneOffset" name="timezoneOffset">
        @if(!conferenceForm.errors.isEmpty) {
            <div class="form-group errors well">
                <div class="error-message"><h4>The conference couldn't be added, please fix the following issues before trying again: </h4></div>
                <ul>
                @for(error <- conferenceForm.errors) {
                    @if(error.message.contains("required")) {
                        <li class="error-message">The @error.key field must not be empty.</li>
                    } else {
                        @if(!error.message.contains("minLength")) {
                            @if(error.key == "date"){
                                <li class="error-message">Please follow the format yyyy-mm-dd in the date field.</li>
                            }
                            @if(error.key == "time" || error.key == "length"){
                                <li class="error-message">Please follow the format hh:mm in the @error.key field.</li>
                            }
                        }
                    }
                    @if(error.message.contains("maxLength")) {
                        <li class="error-message">
                            The @error.key field may only contain up to @error.args characters.
                        </li>
                    }
                }
                </ul>
            </div>
        }
        <div class="form-group">
            <label for="title" class="col-sm-2 control-label">Title</label>
            <div class="col-sm-5">
                <input type="text" class="form-control" id="title" name="title" value='@conferenceForm("title").value.getOrElse("")'>
            </div>
        </div>
        <div class="form-group">
            <label for="abstract" class="col-sm-2 control-label">Abstract</label>
            <div class="col-sm-9">
                <textarea class="form-control" id="abstract" name="abstract">@conferenceForm("abstract").value.getOrElse("")</textarea>
            </div>
        </div>
        <div class="form-group">
            <label for="speaker" class="col-sm-2 control-label">Speaker</label>
            <div class="col-sm-3">
                <select class="form-control" id="speaker" name="speaker">
                @for(speaker <- Speaker.listAll) {
                    @if(conferenceForm("speaker").value.contains(speaker.id.toString)) {
                        <option selected value="@speaker.id">@speaker.firstName @speaker.lastName</option>
                    } else {
                        <option value="@speaker.id">@speaker.firstName @speaker.lastName</option>
                    }
                }
                </select>
            </div>
        </div>
        <div class="form-group">
            <label for="datepicker" class="col-sm-2 control-label">Date</label>
            <div class="col-sm-2">
                <input type="text" class="form-control" id="datepicker" name="date" value='@conferenceForm("date").value.getOrElse("")'>
            </div>
            <label for="timepicker" class="col-sm-1 control-label">Time</label>
            <div class="col-sm-2">
                <input id="timepicker" type="text" name="time" class="form-control time-input" value='@conferenceForm("time").value.getOrElse("")'>
            </div>
        </div>
        <div class="form-group">
            <label for="length" class="col-sm-2 control-label">Length</label>
            <div class="col-sm-2">
                <input type="text" class="form-control time-input" id="length" name="length" value='@conferenceForm("length").value.getOrElse("")'>
            </div>
        </div>
        <div class="form-group">
            <label for="organizer" class="col-sm-2 control-label">Organizer</label>
            <div class="col-sm-6">
                <select class="form-control" id="organizer" name="organizer">
                    @for(lab <- Lab.listAll) {
                        @if(conferenceForm("organizer").value.contains(lab.id.toString)){
                            <option selected value="@lab.id">@lab.name</option>
                        } else {
                            <option value="@lab.id">@lab.name</option>
                        }
                    }
                </select>
            </div>
        </div>
        <div class="form-group">
            <div class="col-sm-2"></div>
            <button type="submit" class="btn btn-default submit-button">Submit</button>
        </div>
    }
}